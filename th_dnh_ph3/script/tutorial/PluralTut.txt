#TouhouDanmakufu[Plural]
#ScriptVersion[3]
#Title["Plural Tutorial File"]
#Text["Code by Cyvo[r]A script to hold experiments with plurals"]
#include "./lib/lib_general.dnh"
#System["./../tutorial/system/Default_System.txt"]

@Event{
}

@Initialize{
    TPlural;
    CreateTrack();
    RenderBG;
    BossName;
}

@MainLoop{
    yield;
}

task TPlural{
    let dir = GetCurrentScriptDirectory();
    let obj = ObjEnemyBossScene_Create();
    ObjEnemyBossScene_Add(obj, 0 ,dir ~ "./Talonph1.txt");
    ObjEnemyBossScene_Add(obj, 1, dir ~ "./Talonph3.txt");
    ObjEnemyBossScene_Add(obj, 2, dir ~ "./Talonph2.txt");
    ObjEnemyBossScene_Add(obj, 2, dir ~ "./TalonSpell1.txt");
    ObjEnemyBossScene_Add(obj, 3, dir ~ "./TalonSpell2.txt");
    ObjEnemyBossScene_LoadInThread(obj);
    ObjEnemyBossScene_Regist(obj);
    while(!Obj_IsDeleted(obj)){
        yield;
    }
    CloseScript(GetOwnScriptID());
}

task RenderBG{
    let obj = ObjPrim_Create(OBJ_SPRITE_2D);
    let imgpath = GetCurrentScriptDirectory() ~ "./u2l13sample.png";
    ObjPrim_SetTexture(obj, imgpath);
    ObjSprite2D_SetSourceRect(obj, 0, 1, 384, 448); //alternatively, 0, 0, 384, 448
    ObjSprite2D_SetDestRect(obj, 0, 0, 384, 448);
    ObjRender_SetPosition(obj, 0, 0, 1);
    Obj_SetRenderPriorityI(obj, 20)
}

function CreateTrack{
    let obj = ObjSound_Create();
    ObjSound_Load(obj, GetCurrentScriptDirectory() ~ "./Meta Crystal - Super Smash Bros.ogg");
    ObjSound_SetSoundDivision(obj, SOUND_BGM);
    ObjSound_SetLoopEnable(obj, true);
    ObjSound_SetVolumeRate(obj, 40);
    ObjSound_Play(obj);
    return obj;
}

task BossName{
    let objText = ObjText_Create();
	ObjText_SetText(objText, "Talon");
	ObjText_SetFontSize(objText, 16);
	ObjText_SetMaxWidth(objText, 100);
	ObjRender_SetY(objText,15);
}